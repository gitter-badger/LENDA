<style></style>
<fieldset>
<legend>Financial Information</legend>
<!--<pre>{{grads | json}}</pre>-->
<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <table class="table table-striped">
      <tr>
        <td style="width:20%;">
          <label>Credit Score</label>
          &nbsp;&nbsp;&nbsp;
          <input type="text" class="form-control" name="credit_score" ng-model="loan.fins.credit_score" style="width:80px;"/>
        </td>
        <td style="width:20%;">
          <label>
            CPA Financials
            <br>
            <input type="radio" name="cpa_financials" ng-value="true" ng-model="loan.fins.cpa_financials"/>&nbsp;Yes
            &nbsp;&nbsp;&nbsp;
            <input type="radio" name="cpa_financials" ng-value="false" ng-model="loan.fins.cpa_financials"/>&nbsp;No
          </label>
        </td>
        <td style="width:40%">
              <span ng-if="loan.is_fast_tracked || loan.loan_type_id == 4 || loan.loan_type_id == 5">
                <label>Amount Requested</label>
                <div class="input-group" style="width:200px;">
                  <span class="input-group-addon">$</span>
                    <input type="number" class="form-control" name="amount_requested" ng-model="loan.fins.amount_requested" style="width:150px;"/>
                  </span>
                </div>
        </td>
        <td style="width:20%;">
          <label>Grade</label>
          <br>
          <p>{{loan.fins.grade}}</p>
        </td>
      </tr>
    </table>
  </div>
</div>

<!-- INCOME CONSTRAINTS-->
<div class="row">
  <div class="col-md-12">
    <table class="table table-striped">
      <tr>
        <th style="width:17%;">Income Constraints</th>
        <th style="width:20%;">Revenue</th>
        <th style="width:20%;">Expenses</th>
        <th style="width:20%;">Income</th>
      </tr>
      <tr>
        <td>Year 1</td>
        <td class="text-right">
          <div class="input-group" style="width:200px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.year_1_revenue" ng-change="calcIncomeConstraints(loan.fins)" style="width:200px;"/>
          </div>
        </td>
        <td class="text-right">
          <div class="input-group" style="width:200px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.year_1_expenses" ng-change="calcIncomeConstraints(loan.fins)" style="width:200px;"/>
          </div>
        </td>
        <td class="text-right">
          {{loan.fins.year_1_income = loan.fins.year_1_revenue - loan.fins.year_1_expenses | displaynullcurrency}}
        </td>
      </tr>
      <tr>
        <td>Year 2</td>
        <td class="text-right">
          <div class="input-group" style="width:200px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.year_2_revenue" ng-change="calcIncomeConstraints(loan.fins)" style="width:200px;"/>
          </div>
        </td>
        <td class="text-right">
          <div class="input-group" style="width:200px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.year_2_expenses" ng-change="calcIncomeConstraints(loan.fins)" style="width:200px;"/>
          </div>
        </td>
        <td class="text-right">
          {{loan.fins.year_2_income = loan.fins.year_2_revenue - loan.fins.year_2_expenses | displaynullcurrency}}
        </td>
      </tr>
      <tr>
        <td>Year 3</td>
        <td class="text-right">
          <div class="input-group" style="width:200px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.year_3_revenue" ng-change="calcIncomeConstraints(loan.fins)" style="width:200px;"/>
          </div>
        </td>
        <td class="text-right">
          <div class="input-group" style="width:200px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.year_3_expenses" ng-change="calcIncomeConstraints(loan.fins)" style="width:200px;"/>
          </div>
        </td>
        <td class="text-right">
          {{loan.fins.year_3_income = loan.fins.year_3_revenue - loan.fins.year_3_expenses | displaynullcurrency}}
        </td>
      </tr>
      <tr>
        <td>Average</td>
        <td class="text-right">
          {{ loan.fins.average_revenue | displaynullcurrency}}
        </td>
        <td class="text-right">
          {{loan.fins.average_expense | displaynullcurrency}}
        </td>
        <td class="text-right">
          {{loan.fins.average_income | displaynullcurrency}}
        </td>
      </tr>
    </table>
  </div>
</div>
<!-- INCOME CONSTRAINTS-->

<!-- BALANCE SHEET CONSTRAINTS-->
<div class="row">
  <div class="col-md-12">
    <table class="table table-striped rowed">
      <tr>
        <th style="width:20%;">Balance Sheet Constraint</th>
        <th style="width:15%;">Asset</th>
        <th style="width:15%;">Discount</th>
        <th style="width:15%;">Adj Value</th>
        <th style="width:15%;">Liability</th>
        <th style="width:15%;">Reserve</th>
      </tr>
      <tr>
        <td>Current</td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.current_assets" ng-change="calcIncomeConstraints(loan.fins)" style="width:120px;"/>
          </div>
        </td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <input type="text" class="form-control text-right" ng-model="loan.fins.current_assets_factor" ng-change="calcIncomeConstraints(loan.fins)"/>
            <span class="input-group-addon">%</span>
          </div>
        </td>
        <td class="text-right">
          {{ loan.fins.current_assets_adj = loan.fins.current_assets * (loan.fins.current_assets_factor / 100) | noCentsCurrency}}
        </td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.current_assets_liability" ng-change="calcIncomeConstraints(loan.fins)"/>
          </div>
        </td>
        <td class="text-right">
          {{ loan.fins.current_assets_reserve = loan.fins.current_assets_adj - loan.fins.current_assets_liability | noCentsCurrency}}
        </td>
      </tr>
      <tr>
        <td>Intermediate</td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.intermediate_assets" ng-change="calcIncomeConstraints(loan.fins)" style="width:120px;"/>
          </div>
        </td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <input type="text" class="form-control text-right" ng-model="loan.fins.intermediate_assets_factor"/>
            <span class="input-group-addon">%</span>
          </div>
        </td>
        <td class="text-right">
          {{ loan.fins.intermediate_assets_adj = loan.fins.intermediate_assets * (loan.fins.intermediate_assets_factor / 100) | noCentsCurrency}}
        </td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.intermediate_assets_liability" ng-change="calcIncomeConstraints(loan.fins)"/>
          </div>
        </td>
        <td class="text-right">
          {{ loan.fins.intermediate_assets_reserve = loan.fins.intermediate_assets_adj - loan.fins.intermediate_assets_liability | noCentsCurrency}}
        </td>
      </tr>
      <tr>
        <td>Fixed</td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.fixed_assets" ng-change="calcIncomeConstraints(loan.fins)" style="width:120px;"/>
          </div>
        </td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <input type="text" class="form-control text-right" ng-model="loan.fins.fixed_assets_factor"/>
            <span class="input-group-addon">%</span>
          </div>
        </td>
        <td class="text-right">
          {{ loan.fins.fixed_assets_adj = loan.fins.fixed_assets * (loan.fins.fixed_assets_factor / 100) | noCentsCurrency}}
        </td>
        <td class="text-right">
          <div class="input-group" style="width:120px;">
            <span class="input-group-addon">$</span>
            <input type="text" class="form-control text-right" ng-model="loan.fins.fixed_assets_liability" ng-change="calcIncomeConstraints(loan.fins)"/>
          </div>
        </td>
        <td class="text-right">
          {{ loan.fins.fixed_assets_reserve = loan.fins.fixed_assets_adj - loan.fins.fixed_assets_liability | noCentsCurrency}}
        </td>
      </tr>
      <tr>
        <td>Total</td>
        <td class="text-right">
          {{loan.fins.total_assets = (+loan.fins.current_assets) + (+loan.fins.intermediate_assets) + (+loan.fins.fixed_assets)  | noCentsCurrency}}
        </td>
        <td class="text-center"> - </td>
        <td class="text-right">
          {{ loan.fins.total_assets_adj = (loan.fins.current_assets_adj * 1) + (loan.fins.intermediate_assets_adj * 1) + (loan.fins.fixed_assets_adj * 1) | noCentsCurrency}}
        </td>
        <td class="text-right">
          {{ loan.fins.total_liability = (loan.fins.current_assets_liability * 1) + (loan.fins.intermediate_assets_liability * 1) + (loan.fins.fixed_assets_liability * 1) | noCentsCurrency}}
        </td>
        <td class="text-right">
          {{ loan.fins.total_reserve = (loan.fins.current_assets_reserve * 1) + (loan.fins.intermediate_assets_reserve * 1) + (loan.fins.fixed_assets_reserve * 1) | noCentsCurrency}}
        </td>
      </tr>
    </table>
  </div>
</div>
<!-- BALANCE SHEET CONSTRAINTS-->

<!-- RATIO CONSTRAINTS -->
<div class="row">
<div class="col-md-12">
<table class="table table-striped rowed">
<tr>
  <th style="width: 20%;">Ratio Constraints</th>
  <th style="width: 15%;">Ratios</th>
  <th class="bright" style="width: 15%;">
    Res Adj
  </th>
  <th style="width: 10%;">A</th>
  <th style="width: 10%;">B</th>
  <th style="width: 10%;">C</th>
  <th style="width: 10%;">D</th>
</tr>
<tr>
  <td>Debt to Asset [<=]</td>
  <td ng-class=gtZero(loan.fins.debt2asset_ratio)>
    {{loan.fins.debt2asset_ratio | displaynullpercent}}
  </td>
  <td class="bright" ng-class=gtZero(loan.fins.debt2asset_ratio_adj)>
    {{loan.fins.debt2asset_ratio_adj | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.debt2asset_ratio_adj > grads[0].debt2asset }">
    {{grads[0].debt2asset | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.debt2asset_ratio_adj > grads[1].debt2asset }">
    {{grads[1].debt2asset | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.debt2asset_ratio_adj > grads[2].debt2asset }">
    {{grads[2].debt2asset | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.debt2asset_ratio_adj > grads[3].debt2asset }">
    {{grads[3].debt2asset | displaynullpercent}}
  </td>
</tr>
<tr>
  <td>Current Ratio [>=]</td>
  <td ng-class=gtZero(loan.fins.ratio_current)>
    {{loan.fins.ratio_current | displaynullpercent}}
  </td>
  <td class="bright" ng-class=gtZero(loan.fins.ratio_current_adj)>
    {{loan.fins.ratio_current_adj | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.ratio_current_adj < grads[0].current_ratio }">
    {{grads[0].current_ratio | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.ratio_current_adj < grads[1].current_ratio }">
    {{grads[1].current_ratio | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.ratio_current_adj < grads[2].current_ratio }">
    {{grads[2].current_ratio | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.ratio_current_adj < grads[3].current_ratio }">
    {{grads[3].current_ratio | displaynullpercent}}
  </td>
</tr>
<tr>
  <td>Working Capital [>=]</td>
  <td ng-class=gtZero(loan.fins.capWork)>
    {{loan.fins.capWork | displaynullpercent}}
  </td>
  <td class="bright" ng-class=gtZero(loan.fins.capWork_adj)>
    {{loan.fins.capWork_adj | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capWork_adj < grads[0].working_capital }">
    {{grads[0].working_capital | displaypercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capWork_adj < grads[1].working_capital }">
    {{grads[1].working_capital | displaypercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capWork_adj < grads[2].working_capital }">
    {{grads[2].working_capital | displaypercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capWork_adj < grads[3].working_capital }">
    {{grads[3].working_capital | displaypercent}}
  </td>
</tr>
<tr>
  <td>Borrowing Capacity [>=]</td>
  <td ng-class=gtZero(loan.fins.capBorrow)>
    {{loan.fins.capBorrow | displaynullpercent}}
  </td>
  <td class="bright" ng-class=gtZero(loan.fins.capBorrow_adj)>
    {{loan.fins.capBorrow_adj | displaynullpercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capBorrow_adj <= grads[0].borrowing_capacity }">
    {{grads[0].borrowing_capacity | displaypercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capBorrow_adj <= grads[1].borrowing_capacity }">
    {{grads[1].borrowing_capacity | displaypercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capBorrow_adj <= grads[2].borrowing_capacity }">
    {{grads[2].borrowing_capacity | displaypercent}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.capBorrow_adj <= grads[3].borrowing_capacity }">
    {{grads[3].borrowing_capacity | displaypercent}}
  </td>
</tr>
<tr>
  <td>Credit Score [>=]</td>
  <td></td>
  <td class="bright text-center">
    {{loan.fins.credit_score | displaynull}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.credit_score < grads[0].credit_score }">
    {{grads[0].credit_score}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.credit_score < grads[1].credit_score }">
    {{grads[1].credit_score}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.credit_score < grads[2].credit_score }">
    {{grads[2].credit_score}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.credit_score < grads[3].credit_score }">
    {{grads[3].credit_score}}
  </td>
</tr>
<tr>
  <td>Years Farming [>=]</td>
  <td></td>
  <td class="text-center bright">
    <!--TODO: Patch experience to loanfinancials on Farmer insert/update-->
    {{loan.fins.experience | displaynull}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.experience < grads[0].years_farming }">
    {{grads[0].years_farming}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.experience < grads[1].years_farming }">
    {{grads[1].years_farming}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.experience < grads[2].years_farming }">
    {{grads[2].years_farming}}
  </td>
  <td class="text-right" ng-class="{red: loan.fins.experience < grads[3].years_farming }">
    {{grads[3].years_farming}}
  </td>
</tr>
<tr>
  <td>CPA Financials</td>
  <td></td>
  <td class="bright text-center">
    {{loan.fins.cpa_financials | boolean}}
  </td>
  <td class="text-center" ng-class="{red: !grads[0].cpa_financials }">
    {{grads[0].cpa_financials | boolean}}
  </td>
  <td class="text-center">&nbsp;</td>
  <td class="text-center">&nbsp;</td>
  <td class="text-center">&nbsp;</td>
</tr>
<tr>
  <td>Bankruptcy</td>
  <td></td>
  <td class="text-center bright">
    <!--TODO: Patch bankruptcy to loanfinancials on Quests insert/update-->
    {{ loan.fins.bankruptcy | boolean}}
  </td>
  <td class="text-center" ng-class="{red: loan.fins.bankruptcy }">
    {{grads[0].bankruptcy | boolean}}
  </td>
  <td class="text-center" ng-class="{red: loan.fins.bankruptcy }">
    {{grads[1].bankruptcy | boolean}}
  </td>
  <td class="text-center" ng-class="{red: loan.fins.bankruptcy }">
    {{grads[2].bankruptcy | boolean}}
  </td>
  <td class="text-center" ng-class="{red: !loan.fins.bankruptcy }">
    <!--{{grads[3].bankruptcy | boolean}}-->
  </td>
</tr>
<tr>
  <td>Judgement</td>
  <td></td>
  <td class="text-center bright">
    <!--TODO: Patch judgements to loanFinancials on Quests insert/update-->
    {{ loan.fins.judgements | boolean}}
  </td>
  <td class="text-center" ng-class="{red: loan.fins.judgements }">
    {{grads[0].judgement| boolean}}
  </td>
  <td class="text-center" ng-class="{red: loan.fins.judgements }">
    {{grads[1].judgement | boolean}}
  </td>
  <td class="text-center" ng-class="{red: loan.fins.judgements }">
    {{grads[2].judgement | boolean}}
  </td>
  <td class="text-center" ng-class="{red: !loan.fins.judgements }">
    <!--{{grads[3].judgement | boolean}}-->
  </td>
</tr>
<tr>
  <td>Any Type Max Loan Constraint</td>
  <td></td>
  <td class="bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].all_max_loan)>
    {{grads[0].all_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[1].all_max_loan)>
    {{grads[1].all_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[2].all_max_loan)>
    {{grads[2].all_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[3].all_max_loan)>
    {{grads[3].all_max_loan | displaynullcurrency}}
  </td>
</tr>
<tr ng-if="loan.loan_type_id == 3">
  <td>Ag-Pro Max Loan Constraint</td>
  <td></td>
  <td class="bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].ag_pro_max_loan)>
    {{grads[0].ag_pro_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right"ng-class=gtZero(grads[1].ag_pro_max_loan)>
    {{grads[1].ag_pro_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right"ng-class=gtZero(grads[2].ag_pro_max_loan)>
    {{grads[2].ag_pro_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right"ng-class=gtZero(grads[3].ag_pro_max_loan)>
    {{grads[3].ag_pro_max_loan | displaynullcurrency}}
  </td>
</tr>
<tr ng-if="loan.loan_type_id == 4">
  <td>Capital Bridge Max Loan Constraint</td>
  <td></td>
  <td class="bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].capital_bridge_max_loan)>
    {{grads[0].capital_bridge_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[1].capital_bridge_max_loan)>
    {{grads[1].capital_bridge_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[2].capital_bridge_max_loan)>
    {{grads[2].capital_bridge_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[3].capital_bridge_max_loan)>
    {{grads[3].capital_bridge_max_loan | displaynullcurrency}}
  </td>
</tr>
<tr ng-if="loan.loan_type_id == 5">
  <td>Ag-Vest Max Loan Constraint</td>
  <td></td>
  <td class="class-right bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].ag_vest_max_loan)>
    {{grads[0].ag_vest_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[1].ag_vest_max_loan)>
    {{grads[1].ag_vest_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[2].ag_vest_max_loan)>
    {{grads[2].ag_vest_max_loan | displaynullcurrency}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[3].ag_vest_max_loan)>
    {{grads[3].ag_vest_max_loan | displaynullcurrency}}
  </td>
</tr>
<tr ng-if="loan.loan_type_id == 3">
  <td>Ag-Pro Max Rate of Avg Expenses</td>
  <td></td>
  <td class="class-right bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].ag_pro_max_rate)>
    {{grads[0].ag_pro_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[1].ag_pro_max_rate)>
    {{grads[1].ag_pro_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[2].ag_pro_max_rate)>
    {{grads[2].ag_pro_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[3].ag_pro_max_rate)>
    {{grads[3].ag_pro_max_rate | displaynullpercent}}
  </td>
</tr>
<tr ng-if="loan.loan_type_id == 4">
  <td>Capital Bridge Max Rate of Avg Expenses</td>
  <td></td>
  <td class="class-right bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].capital_bridge_max_rate)>
    {{grads[0].capital_bridge_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[1].capital_bridge_max_rate)>
    {{grads[1].capital_bridge_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[2].capital_bridge_max_rate)>
    {{grads[2].capital_bridge_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[3].capital_bridge_max_rate)>
    {{grads[3].capital_bridge_max_rate | displaynullpercent}}
  </td>
</tr>
<tr ng-if="loan.loan_type_id == 5">
  <td>Ag-Vest Max Rate of Avg Expenses</td>
  <td></td>
  <td class="class-right bright"></td>
  <td class="text-right" ng-class=gtZero(grads[0].ag_vest_max_rate)>
    {{grads[0].ag_vest_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[1].ag_vest_max_rate)>
    {{grads[1].ag_vest_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[2].ag_vest_max_rate)>
    {{grads[2].ag_vest_max_rate | displaynullpercent}}
  </td>
  <td class="text-right" ng-class=gtZero(grads[3].ag_vest_max_rate)>
    {{grads[3].ag_vest_max_rate | displaynullpercent}}
  </td>
</tr>
</table>
</div>
</div>
<!-- RATIO CONSTRAINTS -->

  <br/><br/>
  <div class="row">
    <div class="col-sm-12 text-right">
      <button style="margin-right:10px;" class="btn btn-primary" ng-click="createFarmer(farmer)">NEXT</button>
    </div>
  </div>

</fieldset>
<!--<pre>{{loan | json}}</pre>-->
<!--<pre>{{loan.fins | json}}</pre>-->
<!--<pre>{{grads | json}}</pre>-->

<!-- PLANNED CROP CONSTRAINTS -->
<div class="row" style="display:none;">
  <div class="col-md-12">
    <table class="table table-striped rowed">
      <tr>
        <th style="width:20%;">Planned Crop Constraints</th>
        <th style="width:15%;">Acres</th>
        <th style="width:15%;">TEA</th>
        <th style="width:15%;">Ag-Pro</th>
        <th style="width:15%;">Cap-Bridge</th>
        <th style="width:15%;">Ag-Vest</th>
      </tr>
      <tr ng-if="loan.crops.length == 0">
        <td colspan="6"><strong>No crops were selected.</strong></td>
      </tr>
      <tr ng-repeat="c in loan.crops" ng-if="c.acres > 0">
        <td>{{c.crop.crop}}</td>
        <td class="text-center">{{c.acres | number: 1}}</td>
        <td class="text-right">
          {{c.crop.tea | displaynullcurrency}}
        </td>
        <td class="text-right">
          {{ c.crop.tea * c.acres | displaynullcurrency }}
        </td>
        <td class="text-right">
          {{ c.crop.tea * c.acres * 0.35 | displaynullcurrency}}
        </td>
        <td class="text-right">
          {{ c.crop.tea * c.acres * 0.35 | displaynullcurrency}}
        </td>
      </tr>
      <tr class="success">
        <td class="text-left">
          Total
        </td>
        <td class="text-center" ng-class=gtZero(getTotalAcres())>
          {{getTotalAcres(loan.crops) | number:1}}
        </td>
        <td class="text-center"> - </td>
        <td ng-class=gtZero(getTotalPCC_AgPro(loan.crops))>
          {{getTotalPCC_AgPro(loan.crops) | displaynullcurrency}}
        </td>
        <td ng-class=gtZero(getTotalPCC_AgPro(loan.crops))>
          {{getTotalPCC_AgPro(loan.crops) * .35 | displaynullcurrency}}
        </td>
        <td ng-class=gtZero(getTotalPCC_AgPro(loan.crops))>
          {{getTotalPCC_AgPro(loan.crops) * .35 | displaynullcurrency}}
        </td>
      </tr>
    </table>
  </div>
</div>
<!-- PLANNED CROP CONSTRAINTS -->

<!-- SUMMARY PANEL-->
<div class="row" style="display:none;">
  <div class="col-md-12">
    <table class="table table-striped rowed" style="width:40%">
      <tr>
        <th>Borrower Rating</th>
        <th>
          {{loan.grade.grade}}
        </th>
      </tr>
      <tr ng-if="loan.loan_type_id == 3">
        <td>Ag-Pro Max Loan Addition</td>
        <td class="text-right" ng-class=gtZero(loan.grade.ag_pro_max)>
          {{loan.grade.ag_pro_max | displaynullcurrency}}
        </td>
      </tr>
      <tr ng-if="loan.loan_type_id == 4">
        <td>Capital Bridge Max Loan</td>
        <td class="text-right" ng-class=gtZero(loan.grade.cap_bridge_max)>
          {{loan.grade.cap_bridge_max | displaynullcurrency}}
        </td>
      </tr>
      <tr ng-if="loan.loan_type_id == 5">
        <td>Ag-Vest Max Loan</td>
        <td class="text-right" ng-class=gtZero(loan.grade.ag_vest_max)>
          {{loan.grade.ag_vest_max | displaynullcurrency}}
        </td>
      </tr>
    </table>
  </div>
</div>
<!-- SUMMARY PANEL-->