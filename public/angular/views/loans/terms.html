<style>
  .rowed td{border:1px solid #dddddd; }
</style>
<form>
<fieldset>
  <!--<pre>{{loan | json}}</pre>-->
  <legend>Loan Terms</legend>
  <div class="row">
    <div class="col-md-4">
      <label>Due Date</label>
      <p class="input-group">
        <input type="text" class="form-control" datepicker-popup="M/d/yy" ng-model="loan.due_date" is-open="opened" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
      </p>
      <br/><br/>
    </div>
    <div class="col-md-4">&nbsp;</div>
    <div class="col-md-4">&nbsp;</div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <table class="table" style="width: 60%;">
        <tr>
          <td colspan="3">&nbsp;</td>
          <td class="text-center">
            <span ng-if="loan.loan_type_id == 2">Fee On Total</span>
          </td>
        </tr>
        <tr>
          <td style="width:22%;">Loan Processing Fee</td>
          <td style="width:10%;">
            <percent-edit-in-place value="loan.fins.fee_processing_percent"></percent-edit-in-place>
          </td>
          <td class="text-right" style="width:8%;">
            <span ng-if="loan.fins.fee_processing_onTotal">
              {{loan.fins.proc_fee | flexCurrency:0}}
            </span>
            <span ng-if="!loan.fins.fee_processing_onTotal">
              {{loan.fins.proc_fee_arm_only | flexCurrency:0}}
            </span>
          </td>
          <td class="text-center" style="width:20%;">
            <span ng-if="loan.loan_type_id == 2">
              <input type="checkbox" ng-model="loan.fins.fee_processing_onTotal"/>
            </span>
          </td>
        </tr>
        <tr>
          <td>Loan Service Fee</td>
          <td>
            <percent-edit-in-place value="loan.fins.fee_service_percent"></percent-edit-in-place>
          </td>
          <td class="text-right">
            <span ng-if="loan.fins.fee_service_onTotal">
              {{loan.fins.srvc_fee | flexCurrency:0}}
            </span>
            <span ng-if="!loan.fins.fee_service_onTotal">
              {{loan.fins.srvc_fee_arm_only | flexCurrency:0}}
            </span>
          </td>
          <td class="text-center">
            <span ng-if="loan.loan_type_id == 2">
              <input type="checkbox" ng-model="loan.fins.fee_service_onTotal"/>
            </span>
          </td>
        </tr>
        <tr>
          <td>ARM Interest Rate</td>
          <td>
            <percent-edit-in-place value="loan.fins.int_percent_arm"></percent-edit-in-place>
          </td>
          <td class="text-right">
            *{{(loan.loan_days/365)*(loan.fins.int_percent_arm/100)*loan.fins.commit_arm*.5 | flexCurrency:0}}
          </td>
          <td class="text-center">&nbsp;</td>
        </tr>
        <tr ng-if="loan.has_distributor">
          <td>Distributor Interest Rate</td>
          <td>
            <percent-edit-in-place value="loan.fins.int_percent_dist"></percent-edit-in-place>
          </td>
          <td class="text-right">
            *{{(loan.loan_days/365)*(loan.fins.int_percent_dist/100)*loan.fins.commit_dist*.5 | flexCurrency:0}}
          </td>
          <td class="text-center">&nbsp;</td>
        </tr>
        <tr>
          <td colspan="4"><span class="">* Interest amounts are best estimates</span></td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 text-right" style="padding-top:25px;">
      <button style="margin-right:10px;" class="btn btn-primary" ng-click="insertTerms()" ng-if="newapplication">SAVE</button>
      <button style="margin-right:10px;" class="btn btn-primary" ng-click="updateTerms()" ng-if="!newapplication">UPDATE</button>
    </div>
  </div>
</fieldset>
  </form>